{
  "type": "object",
  "properties": {
    "ecosystem_uuid": {
      "type": "string",
      "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
    },
    "book": {
      "cnx_identity": {
        "type": "string",
        "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}@([1-9]{1,}[0-9]|[1-9])(\\.([1-9]{1,}[0-9]|[1-9]))?$"
      },
      "contents": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "container_uuid":         {
              "type": "string",
              "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
            },
            "container_parent_uuid":  {
              "type": "string",
              "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
            },
            "container_cnx_identity": {
              "type": "string",
              "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}@([1-9]{1,}[0-9]|[1-9])(\\.([1-9]{1,}[0-9]|[1-9]))?$"
            },
            "pools": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "use_for_clue": {
                    "type": "boolean"
                  },
                  "use_for_personalized_for_assignment_types": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 3,
                      "maxLength": 100
                    },
                    "minItems": 0,
                    "maxItems": 20
                  },
                  "exercise_uuids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
                    },
                    "minItems": 0,
                    "maxItems": 500
                  }
                },
                "required": [
                  "use_for_clue",
                  "use_for_personalized_for_assignment_types",
                  "exercise_uuids"
                ],
                "additionalProperties": false
              },
              "minItems": 0,
              "maxItems": 20
            }
          },
          "required": ["container_uuid", "container_parent_uuid", "pools"],
          "additionalProperties": false
        },
        "minItems": 1,
        "maxItems": 500
      }
    },
    "exercises": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "exercise_uuid": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
          },
          "group_uuid":    {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
          },
          "version":       {
            "type": "integer",
            "minumum": 0
          },
          "los": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "minItems": 1,
            "maxItems": 100
          }
        },
        "required": ["exercise_uuid", "group_uuid", "version", "los"],
        "additionalProperties": false
      },
      "minItems": 0,
      "maxItems": 10000
    },
    "imported_at": {
      "type": "string",
      "pattern": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])(T|t)(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.\\d{1,6})?(Z|z)$"
    }
  },
  "required": ["ecosystem_uuid", "book", "exercises", "imported_at"],
  "additionalProperties": false,
  "definitions": {
    "pool": {
      "type": "object",
      "properties": {
        "use_for_clue": {
          "type": "boolean"
        },
        "use_for_personalized_for_assignment_types": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100
          },
          "minItems": 0,
          "maxItems": 20
        },
        "exercise_uuids": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
          },
          "minItems": 0,
          "maxItems": 500
        }
      },
      "required": [
        "use_for_clue",
        "use_for_personalized_for_assignment_types",
        "exercise_uuids"
      ],
      "additionalProperties": false
    },
    "exercise": {
      "type": "object",
      "properties": {
        "exercise_uuid": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
        },
        "group_uuid":    {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
        },
        "version":       {
          "type": "integer",
          "minumum": 0
        },
        "los": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "minItems": 1,
          "maxItems": 100
        }
      },
      "required": ["exercise_uuid", "group_uuid", "version", "los"],
      "additionalProperties": false
    },
    "lo": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100
    }
  }
}
